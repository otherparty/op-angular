<app-navbar></app-navbar>

<app-title class="desktop-only"></app-title>

<!-- flexbox layout -->

@if (bill) {
<div class="black">
  <div class="table-responsive wrap-1600">
    <div class="body flex flow-text lucida">
      <!-- IMAGE, TRACKING -->
      <div class="visual third padded evenly">
        <p class="mobile-only larger impact white-t">{{billSummery?.headLine}}</p>
        <div class="mobile-only">
          <span class="white-t helvetica summary-text keep-all justify"
            [innerHTML]="billSummery?.summary || billSummery?.story"></span>
        </div>
        <br>
        <div class="invert resize-both responsive"><img [src]="sanitize(billSummery.image)" style="max-height: 80%"
            sanitize>
        </div>
        <br>
        <div class="desktop-only">
          <p class="mint-t fittext float-right">{{ bill.latest_major_action_date | date}}</p>
          <ul class="tags">
            <li>
              <span class="white-t justify smaller">{{ bill.latest_major_action }}
              </span>
            </li>
          </ul>
        </div>
        <!-- MOBILE STORY -->
        <div class="mobile-only verbal third padded">
          <p class="midsize mint-t fittext float-right">{{ bill.latest_major_action_date | date}}</p>
          <ul class="tags">
            <li>
              <span class="white-t justify smaller">{{ bill.latest_major_action }}
              </span>
            </li>
          </ul>
          <br>
          <div>
          </div>

          @if (!user) {
          <div class="button-container">
            <a [routerLink]="['/register']">
              <div class="left-align">
                <button class="river-b sand small-btn zoom-in">
                  <p class="smaller">Get updates
                  </p>
                </button>
              </div>
            </a>
            <button class="small-btn white-t gray" (click)="openTwitter(bill?.account?.twitter_account)">
              <p class="smaller">&#64;{{bill?.account?.twitter_account}}</p>
            </button>
          </div>

          <br>
          <span class="white-t bill-text-summary helvetica keep-all smaller justify"
            [innerHTML]="getTruncatedSummary()"></span>
          <br>
          <p class="white-t helvetica larger glitchtext">
            Get it in-depth</p>
          <br>
          <br>
          <div class="button-container">
            <a [routerLink]="['/register']">
              <p class="smaller white-t helvetica larger padded love-b">
                Subscribe</p>
            </a>
            <br>
            <br>
            <a [routerLink]="['/login']">
              <p class="smaller mint-t helvetica larger padded hottie-b">
                Login</p>
            </a>
          </div>
          }
          <br>
          <!-- LOGGED IN -->
          @if (user) {
          <div class="fourth interactive">
            <div class="center visual">
              <p class="impact white-t">What's your vote?</p>
              <p class="helvetica smaller white-t">Let your rep know on X.</p>
              <br>
              <ul class="tags">
                <li>
                  <a href="https://twitter.com/intent/tweet?text={{bill.YeaText}}" target="_blank"><i
                      class="bi bi-approve love-b padded"></i></a>
                </li>
                <li>
                  <a href="https://twitter.com/intent/tweet?text={{bill.NayText}}" target="_blank"><i
                      class="bi bi-disapprove hottie-b padded"></i></a>
                </li>
              </ul>
            </div>
            <br>
          </div>
          <br>
          <!-- BILL TEXT SUMMARY -->
          <span class="white-t bill-text-summary helvetica keep-all smaller justify"
            [innerHTML]="billSummery?.bill_text_summary"></span>
          <br>
          }
          <br>
          <div class="button-container">
            @if (!user) {
            <!-- <a [routerLink]="['/register']">
              <div class="left-align">
                <button class="river-b sand small-btn zoom-in">
                  <p class="smaller">Follow
                    #{{bill?.bill_slug}}</p>
                </button>
              </div>
            </a> -->
            }
            @if (user) {
            <div class="left-align">
              <button class="river-b sand small-btn zoom-in" (click)="openGovTrack(bill?.govtrack_url)">
                <p class="smaller">Get updates</p>
              </button>
            </div>
            <button class="small-btn white-t gray" (click)="openTwitter(bill?.account?.twitter_account)">
              <p class="smaller">&#64;{{bill?.account?.twitter_account}}</p>
            </button>
            }
            <!-- <button class="small-btn white-t gray" (click)="openTwitter(bill?.account?.twitter_account)">
              <p class="smaller">&#64;{{bill?.account?.twitter_account}}</p>
            </button> -->
          </div>
        </div>
        <br>
        <!-- DESKTOP FTB -->
        <div class="desktop-only">
          <div class="button-container">
            @if (!user) {
            <a [routerLink]="['/register']">
              <!-- <div class="left-align"> -->
              <button class="river-b sand small-btn zoom-in">
                <p class="smaller">Get updates
                </p>
              </button>
              <!-- </div> -->
            </a>
            }
            @if (user) {
            <div class="left-align">
              <button class="river-b sand small-btn zoom-in" (click)="openGovTrack(bill?.govtrack_url)">
                <p class="smaller">Get updates
                </p>
              </button>
            </div>
            }
            <button class="small-btn white-t gray" (click)="openTwitter(bill?.account?.twitter_account)">
              <p class="smaller">&#64;{{bill?.account?.twitter_account}}</p>
            </button>
          </div>
        </div>
      </div>
      <!-- DESKTOP STORY -->
      <div class="desktop-only verbal third padded">
        <p class="white-t larger impact">{{billSummery?.headLine}}</p>
        <span class="white-t helvetica keep-all summary-text justify"
          [innerHTML]="billSummery?.summary || billSummery?.story"></span>
        <br>
        @if (!user) {
        <span class="white-t bill-text-summary helvetica keep-all smaller justify"
          [innerHTML]="getTruncatedSummary()"></span>
        <br>
        <p class="white-t helvetica larger glitchtext">
          Get it in-depth</p>
        <br>
        <br>
        <div class="button-container">
          <a [routerLink]="['/register']">
            <p class="white-t helvetica padded love-b">
              Subscribe</p>
          </a>
          <br>
          <br>
          <a [routerLink]="['/login']">
            <p class="mint-t helvetica padded hottie-b">
              Login</p>
          </a>
        </div>
        }
        <!-- LOGGED IN -->
        @if (user) {
        <div class="fourth interactive">
          <div class="center visual">
            <p class="impact white-t smaller">What's your vote?</p>
            <p class="helvetica smaller white-t">Let your rep know on X.</p>
            <br>
            <ul class="tags">
              <li>
                <a href="https://twitter.com/intent/tweet?text={{bill.YeaText}}" target="_blank" class="white-t"><i
                    class="bi bi-approve love-b padded"></i></a>
              </li>
              <li>
                <a href="https://twitter.com/intent/tweet?text={{bill.NayText}}" target="_blank" class="white-t"><i
                    class="bi bi-disapprove hottie-b padded"></i></a>
              </li>
            </ul>
          </div>
          <br>
        </div>
        <br>
        <!-- BILL TEXT SUMMARY -->
        <span class="white-t bill-text-summary helvetica keep-all smaller justify"
          [innerHTML]="billSummery?.bill_text_summary"></span>
        <br>
        }
        <br>
        <br>
      </div>
    </div>
  </div>
</div>
<app-content></app-content>
}

<!-- TODO: Create separate component -->
@if(isError) {
<div class="invert white">
  <div class="wrap-1600 table-responsive">

    <div class="flex flow-text lucida">
      <!-- two columns -->
      <div class="half padded evenly infinitile">
        <!-- <p class="helvetica larger">Dairy Innovation</p> -->
        <div class="resize-both responsive"><img [src]="sanitize(fallbackImage)" style="max-height: 80%" sanitize>
        </div>
        <p class="spacer"></p>
      </div>
      <div class="half padded">
        <p class="helvetica larger neon-text">404 Error: Missing Bill</p>
        <br>
        <span class="helvetica keep-all flow-text justify">
          <!-- we realize we've delved into uncharted legislative realms. Our robotic allies are diligently scouring for
        answers. In the interim, let's retreat to familiar ground. Home beckons, offering respite amidst uncertainty. As
        we await resolution, let's regroup, recharge, and strategize our next steps. Together, we'll navigate this
        unfamiliar terrain with caution and resolve. Our journey may be unpredictable, but with perseverance and
        collaboration, we'll overcome any obstacle that stands in our path. -->
        </span>
        <p class="spacer"></p>
        <p class="spacer"></p>
        <p class="spacer"></p>
        <button class="flood btn-medium bitshadow" (click)="fallbackHome()">
          Go Back Home</button>
        <br>
        <br>
      </div>
    </div>
  </div>
</div>
<app-content></app-content>
<p class="spacer"></p>
<p class="spacer"></p>
<p class="spacer"></p>
}

@if (isLoading) {
<div class="loading">
  <p class="spacer"></p>
  Loading....
  <p class="spacer"></p>
  <p class="spacer"></p>
</div>
}

<app-footer></app-footer>