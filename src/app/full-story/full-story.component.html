<app-navbar></app-navbar>

<app-title class="desktop-only"></app-title>

<!-- flexbox layout -->

@if (bill) {
<div class="invert white">
  <div class="table-responsive wrap-1600">
    <div class="body flex flow-text lucida">
      <!-- IMAGE, TRACKING -->
      <div class="visual third padded evenly infinitile">
        <p class="mobile-only huge impact">{{billSummery?.headLine}}</p>
        <div class="mobile-only">
          <br>
          <p class="brutal-text fittext float-right">{{ bill.latest_major_action_date | date}}</p>
          <ul class="tags">
            <li>
              <span class="flow-text justify">{{ bill.latest_major_action }}
              </span>
            </li>
          </ul>
        </div>
        <div class="resize-both responsive image"><img [src]="sanitize(billSummery.image)" style="max-height: 80%"
            sanitize>
        </div>
        <br>
        <div class="desktop-only">
          <p class="brutal-text fittext float-right">{{ bill.latest_major_action_date | date}}</p>
          <ul class="tags">
            <li>
              <span class="flow-text justify">{{ bill.latest_major_action }}
              </span>
            </li>
          </ul>
        </div>
        <!-- MOBILE STORY -->
        <div class="mobile-only verbal third padded">
          <span class="helvetica larger keep-all flow-text justify"
            [innerHTML]="billSummery?.summary || billSummery?.story"></span>
          <br>
          <br>
          <div>
            @if (!user) {
            <a [routerLink]="['/register']">
              <div class="left-align">
                <button class="river-b sand small-btn zoom-in">Follow
                  #{{bill?.bill_slug}}</button>
              </div>
            </a>
            }
            @if (user) {
            <div class="left-align">
              <button class="river-b sand small-btn zoom-in" (click)="openGovTrack(bill?.govtrack_url)">Follow
                #{{bill?.bill_slug}}</button>
            </div>
            }
            <br>
          </div>
          <br>
          <br>

          @if (!user) {
          <div class="half flex table-responsive interactive stretch">
            @if (bill?.account?.twitter_account) {
            <div class="left-align fourth additional-info">
              <p class="bold">Kudos or questions?</p>
              <br>
              <button class="btn-medium white-t gray" (click)="openTwitter(bill?.account?.twitter_account)">
                &#64;{{bill?.account?.twitter_account}}</button>
            </div>
            }
            <div class="subscribe-btn left-align">
              <br>
              <br>
              <br>
              <a [routerLink]="['/register']">
                <p class="black-t helvetica larger glitchtext">
                  Subscribe for in-depth breakdowns</p>
              </a>
            </div>
          </div>
          }
          <!-- LOGGED IN -->
          @if (user) {
          <div class="fourth interactive">
            <div class="center visual">
              <p class="impact">What's your vote?</p>
              <br>
              <p class="helvetica smaller">Let your rep know.</p>
              <br>
              <ul class="tags">
                <li>
                  <a href="https://twitter.com/intent/tweet?text={{bill.YeaText}}" target="_blank"
                    class="river-b padding btn-medium black-t white"><strong> Yea </strong></a>
                </li>
                <li>
                  <a href="https://twitter.com/intent/tweet?text={{bill.NayText}}" target="_blank"
                    class="hottie-b padding btn-small black-t white"><strong> Nay </strong></a>
                </li>
              </ul>
            </div>
            <br>
          </div>
          <br>
          <!-- BILL TEXT SUMMARY -->
          <span class="bill-text-summary helvetica keep-all flow-text justify"
            [innerHTML]="billSummery?.bill_text_summary"></span>
          <br>
          @if (bill?.account?.twitter_account) {
          <div class="center fourth">
            <p class="bold">Kudos or questions?</p>
            <br>
            <button class="btn-medium white-t gray" (click)="openTwitter(bill?.account?.twitter_account)">
              &#64;{{bill?.account?.twitter_account}}</button>
          </div>
          }
          }
          <br>
        </div>
        <br>
        <!-- DESKTOP FTB -->
        <div class="desktop-only">
          @if (!user) {
          <a [routerLink]="['/register']">
            <div class="left-align">
              <button class="river-b sand small-btn zoom-in">Follow
                #{{bill?.bill_slug}}</button>
            </div>
          </a>
          }
          @if (user) {
          <div class="left-align">
            <button class="river-b sand small-btn zoom-in" (click)="openGovTrack(bill?.govtrack_url)">Follow
              #{{bill?.bill_slug}}</button>
          </div>
          }
          <br>
        </div>
      </div>
      <!-- DESKTOP STORY -->
      <div class="desktop-only verbal third padded">
        <p class="huge impact">{{billSummery?.headLine}}</p>
        <span class="helvetica keep-all flow-text justify"
          [innerHTML]="billSummery?.summary || billSummery?.story"></span>
        <br>
        <br>

        @if (!user) {
        <div class="half flex table-responsive interactive stretch">
          @if (bill?.account?.twitter_account) {
          <div class="left-align fourth additional-info">
            <p class="bold">Kudos or questions?</p>
            <br>
            <button class="btn-medium white-t gray" (click)="openTwitter(bill?.account?.twitter_account)">
              &#64;{{bill?.account?.twitter_account}}</button>
          </div>
          }
          <div class="subscribe-btn left-align">
            <br>
            <br>
            <br>
            <a [routerLink]="['/register']">
              <p class="black-t helvetica larger glitchtext">
                Subscribe for in-depth breakdowns</p>
            </a>
          </div>
        </div>
        }
        <br>
        <!-- LOGGED IN -->
        @if (user) {
        <div class="fourth interactive">
          <div class="center visual">
            <p class="impact">What's your vote?</p>
            <br>
            <p class="helvetica smaller">Let your rep know.</p>
            <br>
            <ul class="tags">
              <li>
                <a href="https://twitter.com/intent/tweet?text={{bill.YeaText}}" target="_blank"
                  class="river-b padding btn-medium black-t white"><strong> Yea </strong></a>
              </li>
              <li>
                <a href="https://twitter.com/intent/tweet?text={{bill.NayText}}" target="_blank"
                  class="hottie-b padding btn-small black-t white"><strong> Nay </strong></a>
              </li>
            </ul>
          </div>
          <br>
        </div>
        <br>
        <!-- BILL TEXT SUMMARY -->
        <span class="bill-text-summary helvetica keep-all flow-text justify"
          [innerHTML]="billSummery?.bill_text_summary"></span>
        <br>
        @if (bill?.account?.twitter_account) {
        <div class="center fourth">
          <p class="bold">Kudos or questions?</p>
          <br>
          <button class="btn-medium white-t gray" (click)="openTwitter(bill?.account?.twitter_account)">
            &#64;{{bill?.account?.twitter_account}}</button>
        </div>
        }
        }
        <br>
        <br>
      </div>
    </div>
  </div>
</div>
<app-content></app-content>
}

<!-- TODO: Create separate component -->
@if(isError) {
<div class="invert white">
  <div class="wrap-1600 table-responsive">

    <div class="flex flow-text lucida">
      <!-- two columns -->
      <div class="half padded evenly infinitile">
        <!-- <p class="helvetica larger">Dairy Innovation</p> -->
        <div class="resize-both responsive"><img [src]="sanitize(fallbackImage)" style="max-height: 80%" sanitize>
        </div>
        <p class="spacer"></p>
      </div>
      <div class="half padded">
        <p class="helvetica larger neon-text">404 Error: Missing Bill</p>
        <br>
        <span class="helvetica keep-all flow-text justify">
          <!-- we realize we've delved into uncharted legislative realms. Our robotic allies are diligently scouring for
        answers. In the interim, let's retreat to familiar ground. Home beckons, offering respite amidst uncertainty. As
        we await resolution, let's regroup, recharge, and strategize our next steps. Together, we'll navigate this
        unfamiliar terrain with caution and resolve. Our journey may be unpredictable, but with perseverance and
        collaboration, we'll overcome any obstacle that stands in our path. -->
        </span>
        <p class="spacer"></p>
        <p class="spacer"></p>
        <p class="spacer"></p>
        <button class="flood btn-medium bitshadow" (click)="fallbackHome()">
          Go Back Home</button>
        <br>
        <br>
      </div>
    </div>
  </div>
</div>
<app-content></app-content>
<p class="spacer"></p>
<p class="spacer"></p>
<p class="spacer"></p>
}

@if (isLoading) {
<div class="loading">
  <p class="spacer"></p>
  Loading....
  <p class="spacer"></p>
  <p class="spacer"></p>
</div>
}

<app-footer></app-footer>